/*!
 * @license jquery-inputenhancer Copyright(c) 2014 sasa+1
 * https://github.com/sasaplus1/jquery-inputenhancer
 * Released under the MIT license.
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(){var e=this.inputenhancer_.jq;setTimeout(function(){e.trigger("pseudo-input"+p)},0)}function n(){var e=this.inputenhancer_;this.value!==e.beforeText&&(e.beforeText=this.value,e.jq.trigger("input"))}function i(e){var t,n,i=this.inputenhancer_.options;if(this.inputenhancer_.keydownWhich=e.which,i.enableMaxLength&&229===e.which){if(n=g(this),n.start!==n.end)return;this.value.length>=i.maxLength&&(t=this.inputenhancer_.jq,t.trigger("overMaxLength"),e.preventDefault())}}function a(e){var t,n,i,a,h=this.inputenhancer_.options;if(h.enableMaxLength){switch(this.inputenhancer_.keydownWhich){case 8:case 9:case 37:case 38:case 39:case 40:case 46:return}if(e.altKey||e.ctrlKey||e.metaKey)return;if(n=g(this),n.start!==n.end)return;i=this.value.length,a=h.maxLength,i===a-1?(t=this.inputenhancer_.jq,t.trigger("maxLength")):i>=a&&(t=this.inputenhancer_.jq,t.trigger("overMaxLength"),e.preventDefault())}}function h(e){var t,n,i=this.inputenhancer_.options;if(i.enableMaxLength&&229===e.which){if(n=g(this),n.start!==n.end)return;this.value.length>=i.maxLength&&(t=this.inputenhancer_.jq,t.trigger("overMaxLength"),e.preventDefault())}}function r(e){var t,n,i,a,h=this.inputenhancer_.options;if(h.enableMaxLength){if(isSf&&e.altKey||e.ctrlKey||e.metaKey)return;if(n=g(this),n.start!==n.end)return;i=this.value.length,a=h.maxLength,i===a-1?(t=this.inputenhancer_.jq,t.trigger("maxLength")):i>=a&&(t=this.inputenhancer_.jq,t.trigger("overMaxLength"),e.preventDefault())}}function u(e){var t,n,i=this.inputenhancer_.options;if(i.enableMaxLength&&this.value.length>=i.maxLength){if(n=g(this),n.start!==n.end)return;t=this.inputenhancer_.jq,t.trigger("overMaxLength"),e.preventDefault()}}function s(){var e,t,n,i=this.inputenhancer_.options;i.enableMaxLength&&(t=this.value.length,n=i.maxLength,t===n?(e=this.inputenhancer_.jq,e.trigger("maxLength")):t>=n&&(this.value=this.value.slice(0,i.maxLength),e=this.inputenhancer_.jq,e.trigger("overMaxLength")))}var c,o,g,p=".inputenhancer";c=!!document.uniqueID&&!!window.attachEvent,o="undefined"!=typeof document.documentElement.style.MozAppearance,isSf=!window.chrome&&"undefined"!=typeof document.documentElement.style.webkitAppearance,g=window.getSelection?function(e){return{start:e.selectionStart,end:e.selectionEnd}}:function(e){var t,n,i;return e.focus(),t=document.selection.createRange(),n=t.duplicate(),n.expand("textedit"),n.setEndPoint("EndToEnd",t),i=n.text.length-t.text.length,{start:i,end:i+t.text.length}},e.fn.inputenhancer=function(g){var d={maxLength:g.maxLength||g.maxlength||0};return d.enableMaxLength=d.maxLength>0,c&&this.bind("keydown"+p,t).bind("keypress"+p,t).bind("paste"+p,t).bind("pseudo-input"+p,n),o?this.bind("keydown"+p,i).bind("keypress"+p,a):this.bind("keydown"+p,h).bind("keypress"+p,r),this.bind("paste"+p,u).bind("input"+p,s),this.each(function(t,n){n.inputenhancer_={beforeText:this.value,keydownWhich:null,options:d,jq:e(this)}})}});